<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="GreenNest Poultry Farm in Rarieda, Siaya County offers fresh eggs, broilers, chicks,
   and organic manure."
    />
    <title>GreenNest Poultry Farm | Fresh Eggs & Poultry Products</title>
    <link rel="icon" type="image/png" href="./favicon.png" />
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-image: url("https://static.wixstatic.com/media/47d33ec9b1694da6ae2130bfa0eac128.jpg/v1/fill/w_1905,h_945,al_c,q_85,usm_0.66_1.00_0.01,enc_avif,quality_auto/47d33ec9b1694da6ae2130bfa0eac128.jpg");
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
      }
      header,
      footer {
        background-color: #2d6a4f;
        color: white;
        text-align: center;
        padding: 1rem;
      }
      nav {
        background-color: #40916c;
        text-align: center;
        padding: 0.5rem;
      }
      nav a {
        color: white;
        margin: 0 1rem;
        text-decoration: none;
        font-weight: bold;
      }
      .container {
        max-width: 1200px;
        margin: auto;
        padding: 2rem;
      }
      .section {
        margin-bottom: 2rem;
      }
      .card {
        background: rgba(255, 255, 255, 0.8);
        padding: 1rem;
        border-radius: 10px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }
      .gallery {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
      }
      .gallery img {
        width: 100%;
        max-width: 200px;
        height: auto;
        border-radius: 10px;
        display: block;
        margin-left: auto;
        margin-right: auto;
      }
      form {
        display: flex;
        flex-direction: column;
      }
      form input,
      form textarea {
        padding: 0.5rem;
        margin-bottom: 1rem;
        border: 1px solid #ccc;
        border-radius: 5px;
      }
      form button {
        padding: 0.75rem;
        background-color: #2d6a4f;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
      }
      blockquote {
        background: #e9f5ef;
        border-left: 5px solid #2d6a4f;
        margin: 1rem 0;
        padding: 1rem;
        border-radius: 5px;
        font-style: italic;
      }
      #mpesa-details {
        display: none;
        margin-top: 1rem;
        padding: 1rem;
        background: #f0f0f0;
        border-radius: 5px;
      }
      .social-icons {
        margin-top: 1rem;
      }
      .social-icons a {
        color: #25d366;
        margin: 0 0.5rem;
        font-size: 1.5rem;
      }
      .social-icons a[aria-label="Facebook"] {
        color: #1877f3;
      }
      @media (max-width: 600px) {
        nav a {
          display: block;
          margin: 0.5rem 0;
        }
        .gallery {
          grid-template-columns: 1fr;
        }
      }
    </style>
    <script src="https://checkout.flutterwave.com/v3.js"></script>
  </head>
  <body>
    <header>
      <img
        src="GeenNestlogo.png"
        alt="GreenNest Poultry Farm Logo"
        style="height: 80px; margin-bottom: 0.5rem;"
      />
      <h1>GreenNest Poultry Farm</h1>
      <p>Fresh from the nest to your table</p>
    </header>
    <nav>
      <a href="#home">Home</a>
      <a href="#about">About</a>
      <a href="#gallery">Gallery</a>
      <a href="#order">Order</a>
      <a href="#testimonials">Testimonials</a>
      <a href="#contact">Contact</a>
    </nav>
    <div class="container">
      <section id="home" class="section card">
        <h2>Welcome to GreenNest Poultry Farm</h2>
        <p>
          Your trusted source for fresh eggs, broilers, chicks, and organic manure in Rarieda, Siaya County.
          Explore our site to learn more and place your order!
        </p>
      </section>
      <section id="about" class="section card">
        <h2>About Us</h2>
        <p>
          GreenNest Poultry is a local farm in Rarieda, Siaya County, providing
          fresh eggs, broilers, chicks and organic manure.
        </p>
      </section>
      <section id="gallery" class="section card">
        <h2>Gallery</h2>
        <div class="gallery">
          <img src="FreshEgg.webp" alt="Basket of fresh eggs" loading="lazy" />
          <img src="Chicks.jpeg" alt="One day old chicks" loading="lazy" />
          <img src="BroilerChicken.jpeg" alt="Healthy broiler chicken" loading="lazy" />
        </div>
      </section>
      <section id="order" class="section card">
        <h2>Order Form</h2>
        <form id="orderForm">
          <input
            type="text"
            id="name"
            name="name"
            placeholder="Your Name"
            required
          />
          <input
            type="email"
            id="email"
            name="email"
            placeholder="Your Email"
            required
          />
          <input
            type="text"
            id="product"
            name="product"
            placeholder="Product (e.g. Eggs, Chicks)"
            required
          />
          <textarea
            name="message"
            rows="4"
            placeholder="Quantity or special request..."
          ></textarea>
          <input
            type="number"
            id="amount"
            name="amount"
            placeholder="Amount in KES"
            required
          />
          <button type="button" onclick="saveOrderToFirebase(); validateAndPay();">Pay Online</button>
          <button type="button" onclick="showMpesa()" style="margin-top: 0.5rem; background-color: #4CAF50;">Pay via M-Pesa</button>
          <div id="mpesa-details">
            <p>Send KES <span id="mpesa-amount">0</span> to <strong>254769716372</strong></p>
            <p>Then WhatsApp your receipt to +254769716372</p>
          </div>
        </form>
      </section>
      <section id="testimonials" class="section card">
        <h2>Testimonials</h2>
        <blockquote>
          "I always get fresh eggs from GreenNest. Highly reliable!" – Mary,
          Bondo
        </blockquote>
        <blockquote>
          "Their broilers are the healthiest I've seen. Great service." –
          Otieno, Kisumu
        </blockquote>
      </section>

      <section id="contact" class="section card">
        <h2>Contact Us</h2>
        <p>Location: Rarieda, Siaya County</p>
        <p>Phone: +254769716372</p>
        <p>Email: abisainyamwanda76@gmail.com</p>
        <div class="social-icons">
          <a href="https://wa.me/254769716372" aria-label="WhatsApp">WhatsApp</a>
          <a href="https://facebook.com/yourpage" aria-label="Facebook">Facebook</a>
        </div>
      </section>
    </div>
    <footer>
      <p>&copy; 2025 GreenNest Poultry Farm. All rights reserved.</p>
    </footer>
    <script>
      const FLW_PUBLIC_KEY = "FLWPUBK_TEST-xxxxxxxxxxxx"; // Replace with your key
      
      function showMpesa() {
        const amount = document.getElementById("amount").value;
        if (!amount || isNaN(amount)) {
          alert("Please enter a valid amount first");
          return;
        }
        document.getElementById("mpesa-amount").textContent = amount;
        document.getElementById("mpesa-details").style.display = "block";
      }

      function validateAndPay() {
        const name = document.getElementById("name").value;
        const email = document.getElementById("email").value;
        const amount = document.getElementById("amount").value;
        const product = document.getElementById("product").value;

    
        if (!name || !email.includes("@") || !amount || isNaN(amount)) {
          alert("Please fill all fields correctly!");
          return;
        }
        document.body.style.cursor = "wait";
        FlutterwaveCheckout({
          public_key: FLW_PUBLIC_KEY,
          tx_ref: "GNF-" + Date.now(),
          amount: amount,
          currency: "KES",
          payment_options: "card,mpesa,banktransfer",
          customer: {
            email: email,
            name: name,
            phone_number: "+254769716372",
          },
          callback: function (data) {
            alert("Thank you for your payment! Transaction Ref: " + data.tx_ref);
            window.location.href = `/thank-you.html?tx_id=${data.transaction_id}`;
          },
          onclose: function() {
            document.body.style.cursor = "default";
          },
          customizations: {
            title: "GreenNest Poultry Farm",
            description: `Payment for ${product}`,
            logo: "GeenNestlogo.png",
          },
        });
      }
      document.getElementById("orderForm").addEventListener("submit", function(e) {
        e.preventDefault();
        const formData = {
          name: document.getElementById("name").value,
          email: document.getElementById("email").value,
          product: document.getElementById("product").value,
          amount: document.getElementById("amount").value
        };
        localStorage.setItem("lastOrder", JSON.stringify(formData));
      });
    </script>
    <script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSy6gBM6y-63-gh0BEye_AGUN4w-pmk-Njcc",
    authDomain: "greennestorders.firebaseapp.com",
    projectId: "greennestorders",
    storageBucket: "greennestorders.appspot.com",
    messagingSenderId: "84684914943",
    appId: "1:84684914943:web:618787bd24cae1292cdaa",
    measurementId: "G-26YLJDLGDF"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  window.saveOrderToFirebase = async function () {
    const name = document.getElementById("name").value;
    const email = document.getElementById("email").value;
    const product = document.getElementById("product").value;
    const message = document.querySelector("textarea").value;
    const amount = document.getElementById("amount").value;

    try {
      await addDoc(collection(db, "orders"), {
        name,
        email,
        product,
        message,
        amount,
        createdAt: new Date().toISOString()
      });
      console.log("✅ Order saved to Firebase.");
    } catch (error) {
      console.error("❌ Error saving to Firebase:", error);
    }
  };
</script>
  </body>
</html>